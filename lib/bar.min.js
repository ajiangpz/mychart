!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("echarts/lib/chart/bar"),require("echarts/lib/echarts"),require("echarts/lib/component/tooltip"),require("echarts/lib/component/legend")):"function"==typeof define&&define.amd?define(["exports","echarts/lib/chart/bar","echarts/lib/echarts","echarts/lib/component/tooltip","echarts/lib/component/legend"],t):t((e=e||self).eBar={},null,e.echarts)}(this,function(e,t,i){"use strict";function n(i,n){var a=null;return function(){var e=this,t=arguments;clearTimeout(a),a=setTimeout(function(){i.apply(e,t)},n)}}function k(e,t,i){if(t){var n=e,a=t.split(".");a.forEach(function(e,t){t===a.length-1?n[e]=i:(n[e]||(n[e]={}),n=n[e])})}}function s(e){return Object.prototype.toString.call(e)}function h(e){return"[object Object]"===s(e)}function c(e){return"[object Array]"===s(e)}i=i&&i.hasOwnProperty("default")?i.default:i;var a={categoryAxis:{axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}},valueAxis:{axisLine:{show:!1}},line:{smooth:!0},grid:{containLabel:!0,left:10,right:10}},o=["#19d4ae","#5ab1ef","#fa6e86","#ffb980","#0067a6","#c4b4e4","#d87a80","#9cbbff","#d9d0c7","#87a997","#d49ea2","#5b4947","#7ba3a8"],d=["grid","dataZoom","visualMap","toolbox","title","legend","xAxis","yAxis","radar","tooltip","axisPointer","brush","geo","timeline","graphic","series","backgroundColor","textStyle"];function u(t,i){Object.keys(i).forEach(function(e){i[e]&&(t[e]=i[e])})}function r(e){this.data=e.data,this.settings=e.settings||{},this.width=e.width,this.height=e.height,this.el=e.el||"bar",this.beforeConfig=e.beforeConfig,this.afterConfig=e.afterConfig,this.afterSetOption=e.afterSetOption,this.afterSetOptionOnce=e.afterSetOptionOnce,this.events=e.events,this.grid=e.grid,this.colors=e.colors,this.tooltipVisible=e.tooltipVisible||!0,this.legendVisible=e.legendVisible||!0,this.legendPosition=e.legendPosition,this.markLine=e.markLine,this.markArea=e.markArea,this.markPoint=e.markPoint,this.visualMap=e.visualMap,this.dataZoom=e.dataZoom,this.toolbox=e.toolbox,this.initOptions=e.initOptions,this.title=e.title,this.legend=e.legend,this.xAxis=e.xAxis,this.yAxis=e.yAxis,this.radar=e.radar,this.tooltip=e.tooltip,this.axisPointer=e.axisPointer,this.brush=e.brush,this.geo=e.geo,this.timeline=e.timeline,this.graphic=e.graphic,this.series=e.series,this.backgroundColor=e.backgroundColor,this.textStyle=e.textStyle,this.animation=e.animation,this.theme=e.theme,this.themeName=e.themeName,this.loading=e.loading,this.dataEmpty=e.dataEmpty,this.extend=e.extend,this.judgeWidth=e.judgeWidth||!1,this.widthChangeDelay=e.widthChangeDelay||300,this.tooltipFormatter=e.tooltipFormatter||function(){},this.resizeable=e.resizeable||!0,this.resizeDelay=e.resizeDelay||200,this.changeDelay=e.changeDelay||0,this.setOptionOpts=e.setOptionOpts||!0,this.cancelResizeCheck=e.cancelResizeCheck,this.notSetUnchange=e.notSetUnchange,this.log=e.log||!0,this.created(),this.init()}r.prototype.chartHandler=null,r.prototype.dataHandler=function(){if(this.chartHandler){var e=this.data,t=e.columns,i=void 0===t?[]:t,n=e.rows,a=void 0===n?[]:n,r={tooltipVisible:this.tooltipVisible,legendVisible:this.legendVisible,echarts:this.echarts,color:o,tooltipFormatter:this.tooltipFormatter,_once:this._once},s=this.chartHandler(i,a,this.settings,r);s&&("function"==typeof s.then?s.then(this.optionsHandler.bind(this)):this.optionsHandler(s))}},r.prototype.init=function(){var e=this;if(!this.echarts){var t=this.themeName||this.theme||a;this.echarts=i.init(document.getElementById(this.el),t,this.initOptions),this.data&&this.changeHandler(),this.createEventProxy(),this.resizeable&&window.addEventListener("resize",n(function(){e.resize()},1e3))}},r.prototype.addResizeListener=function(){window.addEventListener("resize",this.resizeHandler),this._once.onresize=!0},r.prototype.removeResizeListener=function(){window.removeEventListener("resize",this.resizeHandler),this._once.onresize=!1},r.prototype.created=function(){this.echarts=null,this.registeredEvents=[],this._once={},this._store={},this.resizeHandler=n.call(this,this.resize,this.resizeDelay),this.changeHandler=n(this.dataHandler,this.changeDelay)},r.prototype.createEventProxy=function(){var t=this,a=this,e=Object.keys(this.events||{});e.length&&e.forEach(function(e){var n;-1===t.registeredEvents.indexOf(e)&&(t.registeredEvents.push(e),t.echarts.on(e,(n=e,function(){if(n in a.events){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];a.events[n].apply(null,t)}})))})},r.prototype.optionsHandler=function(t){var i,n,a,e,r=this;if(this.legendPosition&&t.legend&&(t.legend[this.legendPosition]=10,~["left","right"].indexOf(this.legendPosition)&&(t.legend.top="middle",t.legend.orient="vertical")),t.color=this.chartColor(),d.forEach(function(e){r[e]&&(t[e]=r[e])}),this.animation&&(i=t,n=this.animation,Object.keys(n).forEach(function(e){i[e]=n[e]})),this.markArea||this.markLine||this.markPoint){var s={markArea:this.markArea,markLine:this.markLine,markPoint:this.markPoint},o=t.series;c(o)?o.forEach(function(e){u(e,s)}):h(o)&&u(o,s)}this.extend&&(a=t,e=this.extend,Object.keys(e).forEach(function(i){var n=e[i];~i.indexOf(".")?k(a,i,n):"function"==typeof n?a[i]=n(a[i]):c(a[i])&&h(a[i][0])?a[i].forEach(function(e,t){a[i][t]=Object.assign({},e,n)}):h(a[i])?a[i]=Object.assign({},a[i],n):a[i]=n}));var l=this.setOptionOpts;!this.settings.bmap&&!this.settings.amap||h(l)||(l=!1),this._isDestroyed||(this.log&&console.log(t),this.echarts.setOption(t,l))},r.prototype.resize=function(){this.cancelResizeCheck?this.echartsResize():this.el&&this.echartsResize()},r.prototype.chartColor=function(){return this.colors||o},r.prototype.echartsResize=function(){this.echarts&&this.echarts.resize()};var x={th:3,mi:6,bi:9,tr:12},l={zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0,abbrLabel:{th:"k",mi:"m",bi:"b",tr:"t"}},v=1e12,y=1e9,O=1e6,A=1e3;function w(e,t,i,n){var a=e.toString().split("."),r=t-(n||0),s=2===a.length?Math.min(Math.max(a[1].length,r),t):r,o=Math.pow(10,s),l=(i(e+"e+"+s)/o).toFixed(s);if(t-s<n){var h=new RegExp("\\.?0{1,"+(n-(t-s))+"}$");l=l.replace(h,"")}return l}function p(e,t,i,n){var a=Math.abs(t),r=!1,s=!1,o="",l="",h=!1,c=void 0,d=void 0;t=t||0,~(i=i||"").indexOf("(")?(r=!0,i=i.replace(/[(|)]/g,"")):(~i.indexOf("+")||~i.indexOf("-"))&&(d=~i.indexOf("+")?i.indexOf("+"):t<0?i.indexOf("-"):-1,i=i.replace(/[+|-]/g,"")),~i.indexOf("a")&&(c=!!(c=i.match(/a(k|m|b|t)?/))&&c[1],~i.indexOf(" a")&&(o=" "),i=i.replace(new RegExp(o+"a[kmbt]?"),""),v<=a&&!c||"t"===c?(o+=e.abbrLabel.tr,t/=v):a<v&&y<=a&&!c||"b"===c?(o+=e.abbrLabel.bi,t/=y):a<y&&O<=a&&!c||"m"===c?(o+=e.abbrLabel.mi,t/=O):(a<O&&A<=a&&!c||"k"===c)&&(o+=e.abbrLabel.th,t/=A)),~i.indexOf("[.]")&&(s=!0,i=i.replace("[.]","."));var u=t.toString().split(".")[0],p=i.split(".")[1],f=i.indexOf(","),m=(i.split(".")[0].split(",")[0].match(/0/g)||[]).length;if(p?(u=(l=~p.indexOf("[")?w(t,(p=(p=p.replace("]","")).split("["))[0].length+p[1].length,n,p[1].length):w(t,p.length,n)).split(".")[0],l=~l.indexOf(".")?"."+l.split(".")[1]:"",s&&0==+l.slice(1)&&(l="")):u=w(t,0,n),o&&!c&&1e3<=+u&&o!==x.trillion&&(u=""+ +u/1e3,o=x.million),~u.indexOf("-")&&(u=u.slice(1),h=!0),u.length<m)for(var g=m-u.length;0<g;g--)u="0"+u;-1<f&&(u=u.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")),i.indexOf(".")||(u="");var b=u+l+(o||"");return r?b=(r&&h?"(":"")+b+(r&&h?")":""):0<=d?b=0===d?(h?"-":"+")+b:b+(h?"-":"+"):h&&(b="-"+b),b}function f(t,i){Object.keys(i).forEach(function(e){t[e]=i[e]})}var m={},g={};function b(e,t,i){var n;return function(e,t,i){t=t||m.defaultFormat,i=i||Math.round;var n=void 0,a=void 0;if(0===e&&null!==m.zeroFormat)n=m.zeroFormat;else if(null===e&&null!==m.nullFormat)n=m.nullFormat;else{for(var r in g)if(g[r]&&t.match(g[r].regexp)){a=g[r].format;break}n=(a=a||p.bind(null,m))(e,t,i,b)}return n}(0===e||void 0===e?0:null===e||"number"==typeof(n=e)&&isNaN(n)?null:"string"==typeof e?m.zeroFormat&&e===m.zeroFormat?0:m.nullFormat&&e===m.nullFormat||!e.replace(/[^0-9]+/g,"").length?null:+e:+e||null,t,i)}f(m,l),b.options=m,b._numberToFormat=p.bind(null,m),b.register=function(e,t){g[e]=t},b.unregister=function(e){g[e]=null},b.setOptions=function(e){f(m,e)},b.reset=function(){f(m,l)},b.register("percentage",{regexp:/%/,format:function(e,t,i,n){var a=~t.indexOf(" %")?" ":"",r=void 0;return n.options.scalePercentBy100&&(e*=100),t=t.replace(/\s?%/,""),r=~(r=n._numberToFormat(e,t,i)).indexOf(")")?((r=r.split("")).splice(-1,0,a+"%"),r.join("")):r+a+"%"}});var ae=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"-";if(isNaN(e))return n;if(!t)return e;if("[object Function]"===s(t))return t(e,b);i=isNaN(i)?0:++i;var a=".[".concat(new Array(i).join(0),"]"),r=t;switch(t){case"KMB":r=i?"0,0".concat(a,"a"):"0,0a";break;case"normal":r=i?"0,0".concat(a):"0,0";break;case"percent":r=i?"0,0".concat(a,"%"):"0,0.[00]%"}return b(e,r)};function re(e){var i=e.innerRows,n=e.dimAxisName,t=e.dimension,a=e.axisVisible,r=e.dimAxisType,s=e.dims;return t.map(function(t){return{type:"category",name:n,nameLocation:"middle",nameGap:22,data:"value"===r?function(e){for(var t=Math.max.apply(null,e),i=Math.min.apply(null,e),n=[],a=i;a<=t;a++)n.push(a);return n}(s):i.map(function(e){return e[t]}),axisLabel:{formatter:function(e){return String(e)}},show:a}})}function se(e){var t,i,n,a=e.innerRows,r=e.metrics,l=e.stack,s=e.axisSite,o=e.isHistogram,h=e.labelMap,c=e.itemStyle,d=e.label,u=e.showLine,p=void 0===u?[]:u,f=e.dimAxisType,m=e.barGap,g=e.opacity,b=e.dims,x={},v=o?s.right||[]:s.top||[],y=o?"yAxisIndex":"xAxisIndex",O=l&&(i=l,n={},Object.keys(i).forEach(function(t){i[t].forEach(function(e){n[e]=t})}),n);return r.forEach(function(e){x[e]=[]}),a.forEach(function(t){r.forEach(function(e){x[e].push(t[e])})}),!!(t=Object.keys(x).map(function(e,t){var i,n,a,r="value"===f?function(e,t){for(var i=Math.max.apply(null,t),n=[],a=Math.min.apply(null,t);a<=i;a++){var r=t.indexOf(a);~r?n.push(e[r]):n.push(null)}return n}(x[e],b):x[e],s=(i={name:null!=h[e]?h[e]:e,type:~p.indexOf(e)?"line":"bar",data:r},n=y,a=~v.indexOf(e)?"1":"0",n in i?Object.defineProperty(i,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[n]=a,i);l&&O[e]&&(s.stack=O[e]),d&&(s.label=d),c&&(s.itemStyle=c);var o=g||function(e,t,i){if(null==t||!e)return e;var n=t.split?t.split("."):[t],a=e;return n.some(function(e,t){if(void 0===a[e])return a=i,!0;a=a[e]}),a}(s,"itemStyle.normal.opacity");return"value"===f&&(s.barGap=m,s.barCategoryGap="1%",null==o&&(o=.5)),null!=o&&k(s,"itemStyle.normal.opacity",o),s})).length&&t}r.prototype.chartHandler=function(e,t,i,n){var a,r=(a=t,JSON.parse(JSON.stringify(a))),s=i.axisSite,o=void 0===s?{}:s,l=i.dimension,h=void 0===l?[e[0]]:l,c=i.stack,d=void 0===c?{}:c,u=i.axisVisible,p=void 0===u||u,f=i.digit,m=void 0===f?2:f,g=i.dataOrder,b=void 0!==g&&g,x=i.scale,v=void 0===x?[!1,!1]:x,y=i.min,O=void 0===y?[null,null]:y,k=i.max,A=void 0===k?[null,null]:k,w=i.labelMap,z=void 0===w?{}:w,E=i.legendName,S=void 0===E?{}:E,j=i.label,L=i.itemStyle,N=i.showLine,M=i.barGap,F=void 0===M?"-100%":M,P=i.opacity;if(b){var H=b.label,T=b.order;H&&T?r.sort(function(e,t){return"desc"===T?e[H]-t[H]:t[H]-e[H]}):console.warn("Need to provide name and order parameters")}var C=n.tooltipVisible,V=n.legendVisible,R=e.slice();o.left&&o.right?R=o.left.concat(o.right):o.left&&!o.right?R=o.left:i.metrics?R=i.metrics:R.splice(e.indexOf(h[0]),1);var _,D,B,G,q,I,Z,J,U,W,$,K,Q=i.yAxisType||["normal","normal"],X=i.xAxisType||"category",Y=i.yAxisName||[],ee=i.xAxisName||"",te=(_=h,r.map(function(e){return e[_[0]]})),ie=V&&(B=(D={metrics:R,labelMap:z,legendName:S}).metrics,G=D.labelMap,(q=D.legendName)||G?{data:G?B.map(function(e){return null==G[e]?e:G[e]}):B,formatter:function(e){return null!=q[e]?q[e]:e}}:{data:B}),ne=re({innerRows:r,dimAxisName:ee,dimension:h,axisVisible:p,dimAxisType:X,dims:te});return{legend:ie,yAxis:function(e){for(var i=e.meaAxisName,n=e.meaAxisType,t=e.axisVisible,a=e.digit,r=e.scale,s=e.min,o=e.max,l={type:"value",axisTick:{show:!1},show:t},h=[],c=function(t){n[t]?h[t]=Object.assign({},l,{axisLabel:{formatter:function(e){return ae(e,n[t],a)}}}):h[t]=Object.assign({},l),h[t].name=i[t]||"",h[t].scale=r[t]||!1,h[t].min=s[t]||null,h[t].max=o[t]||null},d=0;d<2;d++)c(d);return h}({meaAxisName:Y,meaAxisType:Q,axisVisible:p,digit:m,scale:v,min:O,max:A}),series:se({innerRows:r,metrics:R,stack:d,axisSite:o,isHistogram:!0,labelMap:z,itemStyle:L,label:j,showLine:N,dimAxisType:X,dimension:h,barGap:F,opacity:P,dims:te}),xAxis:ne,tooltip:C&&(Z=(I={axisSite:o,isHistogram:!0,meaAxisType:Q,digit:m,labelMap:z}).axisSite,J=I.isHistogram,U=I.meaAxisType,W=I.digit,$=I.labelMap,K=J?Z.right||[]:Z.top||[],$&&(K=K.map(function(e){return void 0===$[e]?e:$[e]})),{trigger:"axis",formatter:function(e){var a=[];return a.push("".concat(e[0].name,"<br>")),e.forEach(function(e){var t,i=e.seriesName,n=~K.indexOf(i)?U[1]:U[0];a.push((t=e.color,['<span style="',"background-color:".concat(t,";"),"display: inline-block;","width: 10px;","height: 10px;","border-radius: 50%;","margin-right:2px;",'"></span>'].join(""))),a.push("".concat(i,": ")),a.push(ae(e.value,n,W)),a.push("<br>")}),a.join("")}})}},e.eBar=r,Object.defineProperty(e,"__esModule",{value:!0})});

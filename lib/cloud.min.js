!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("echarts-wordcloud"),require("echarts/lib/echarts"),require("echarts/lib/component/tooltip"),require("echarts/lib/component/legend")):"function"==typeof define&&define.amd?define(["exports","echarts-wordcloud","echarts/lib/echarts","echarts/lib/component/tooltip","echarts/lib/component/legend"],e):e((t=t||self).eCloud={},null,t.echarts)}(this,function(t,e,i){"use strict";function s(i,s){var o=null;return function(){var t=this,e=arguments;clearTimeout(o),o=setTimeout(function(){i.apply(t,e)},s)}}function o(t){return Object.prototype.toString.call(t)}function l(t){return"[object Object]"===o(t)}function A(t){return"[object Array]"===o(t)}i=i&&i.hasOwnProperty("default")?i.default:i;var n={categoryAxis:{axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}},valueAxis:{axisLine:{show:!1}},line:{smooth:!0},grid:{containLabel:!0,left:10,right:10}},a=["#19d4ae","#5ab1ef","#fa6e86","#ffb980","#0067a6","#c4b4e4","#d87a80","#9cbbff","#d9d0c7","#87a997","#d49ea2","#5b4947","#7ba3a8"],c=["grid","dataZoom","visualMap","toolbox","title","legend","xAxis","yAxis","radar","tooltip","axisPointer","brush","geo","timeline","graphic","series","backgroundColor","textStyle"];function d(e,i){Object.keys(i).forEach(function(t){i[t]&&(e[t]=i[t])})}function r(t){this.data=t.data,this.settings=t.settings||{},this.width=t.width,this.height=t.height,this.el=t.el||"bar",this.beforeConfig=t.beforeConfig,this.afterConfig=t.afterConfig,this.afterSetOption=t.afterSetOption,this.afterSetOptionOnce=t.afterSetOptionOnce,this.events=t.events,this.grid=t.grid,this.colors=t.colors,this.tooltipVisible=t.tooltipVisible||!0,this.legendVisible=t.legendVisible||!0,this.legendPosition=t.legendPosition,this.markLine=t.markLine,this.markArea=t.markArea,this.markPoint=t.markPoint,this.visualMap=t.visualMap,this.dataZoom=t.dataZoom,this.toolbox=t.toolbox,this.initOptions=t.initOptions,this.title=t.title,this.legend=t.legend,this.xAxis=t.xAxis,this.yAxis=t.yAxis,this.radar=t.radar,this.tooltip=t.tooltip,this.axisPointer=t.axisPointer,this.brush=t.brush,this.geo=t.geo,this.timeline=t.timeline,this.graphic=t.graphic,this.series=t.series,this.backgroundColor=t.backgroundColor,this.textStyle=t.textStyle,this.animation=t.animation,this.theme=t.theme,this.themeName=t.themeName,this.loading=t.loading,this.dataEmpty=t.dataEmpty,this.extend=t.extend,this.judgeWidth=t.judgeWidth||!1,this.widthChangeDelay=t.widthChangeDelay||300,this.tooltipFormatter=t.tooltipFormatter||function(){},this.resizeable=t.resizeable||!0,this.resizeDelay=t.resizeDelay||200,this.changeDelay=t.changeDelay||0,this.setOptionOpts=t.setOptionOpts||!0,this.cancelResizeCheck=t.cancelResizeCheck,this.notSetUnchange=t.notSetUnchange,this.log=t.log||!0,this.created(),this.init()}r.prototype.chartHandler=null,r.prototype.dataHandler=function(){if(this.chartHandler){var t=this.data,e=t.columns,i=void 0===e?[]:e,s=t.rows,o=void 0===s?[]:s,n={tooltipVisible:this.tooltipVisible,legendVisible:this.legendVisible,echarts:this.echarts,color:a,tooltipFormatter:this.tooltipFormatter,_once:this._once},r=this.chartHandler(i,o,this.settings,n);r&&("function"==typeof r.then?r.then(this.optionsHandler.bind(this)):this.optionsHandler(r))}},r.prototype.init=function(){var t=this;if(!this.echarts){var e=this.themeName||this.theme||n;this.echarts=i.init(document.getElementById(this.el),e,this.initOptions),this.data&&this.changeHandler(),this.createEventProxy(),this.resizeable&&window.addEventListener("resize",s(function(){t.resize()},1e3))}},r.prototype.addResizeListener=function(){window.addEventListener("resize",this.resizeHandler),this._once.onresize=!0},r.prototype.removeResizeListener=function(){window.removeEventListener("resize",this.resizeHandler),this._once.onresize=!1},r.prototype.created=function(){this.echarts=null,this.registeredEvents=[],this._once={},this._store={},this.resizeHandler=s.call(this,this.resize,this.resizeDelay),this.changeHandler=s(this.dataHandler,this.changeDelay)},r.prototype.createEventProxy=function(){var e=this,o=this,t=Object.keys(this.events||{});t.length&&t.forEach(function(t){var s;-1===e.registeredEvents.indexOf(t)&&(e.registeredEvents.push(t),e.echarts.on(t,(s=t,function(){if(s in o.events){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];o.events[s].apply(null,e)}})))})},r.prototype.optionsHandler=function(e){var i,s,o,t,n=this;if(this.legendPosition&&e.legend&&(e.legend[this.legendPosition]=10,~["left","right"].indexOf(this.legendPosition)&&(e.legend.top="middle",e.legend.orient="vertical")),e.color=this.chartColor(),c.forEach(function(t){n[t]&&(e[t]=n[t])}),this.animation&&(i=e,s=this.animation,Object.keys(s).forEach(function(t){i[t]=s[t]})),this.markArea||this.markLine||this.markPoint){var r={markArea:this.markArea,markLine:this.markLine,markPoint:this.markPoint},a=e.series;A(a)?a.forEach(function(t){d(t,r)}):l(a)&&d(a,r)}this.extend&&(o=e,t=this.extend,Object.keys(t).forEach(function(i){var s=t[i];~i.indexOf(".")?function(t,e,i){if(e){var s=t,o=e.split(".");o.forEach(function(t,e){e===o.length-1?s[t]=i:(s[t]||(s[t]={}),s=s[t])})}}(o,i,s):"function"==typeof s?o[i]=s(o[i]):A(o[i])&&l(o[i][0])?o[i].forEach(function(t,e){o[i][e]=Object.assign({},t,s)}):l(o[i])?o[i]=Object.assign({},o[i],s):o[i]=s}));var h=this.setOptionOpts;!this.settings.bmap&&!this.settings.amap||l(h)||(h=!1),this._isDestroyed||(this.log&&console.log(e),this.echarts.setOption(e,h))},r.prototype.resize=function(){this.cancelResizeCheck?this.echartsResize():this.el&&this.echartsResize()},r.prototype.chartColor=function(){return this.colors||a},r.prototype.echartsResize=function(){this.echarts&&this.echarts.resize()},r.prototype.chartHandler=function(t,e,i,s){var o,n,r,a,h,l,c,d,p,u,f,g,m=i.dimension,b=void 0===m?t[0]:m,y=i.metrics,v=void 0===y?t[1]:y,x=i.color,z=void 0===x?"":x,O=i.sizeMax,k=void 0===O?60:O,w=i.sizeMin,E=void 0===w?12:w,M=i.shape,C=void 0===M?"circle":M,P=s.tooltipVisible,j=s.tooltipFormatter;return{series:(n=(o={dimension:b,metrics:v,rows:e,color:z,sizeMax:k,sizeMin:E,shape:C}).dimension,r=o.metrics,a=o.rows,h=o.color,l=o.sizeMax,c=o.sizeMin,d=o.shape,p={type:"wordCloud",textStyle:{normal:{color:!A(h)&&h?h:function(){return"rgb("+[Math.round(160*Math.random()),Math.round(160*Math.random()),Math.round(160*Math.random())].join(",")+")"}}},shape:d,sizeRange:[c,l]},u=A(h)?h.length:0,f=a.slice().map(function(t){var e={name:t[n],value:t[r]};return 0<u&&(e.textStyle={normal:{color:h[Math.floor(Math.random()*u)]}}),e}),p.data=f,[p]),tooltip:P&&(g=j,{show:!0,formatter:function(t){var e=t.data,i=e.name,s=e.value;return g?g.apply(null,t):"".concat(i,": ").concat(s)}})}},t.eCloud=r,Object.defineProperty(t,"__esModule",{value:!0})});

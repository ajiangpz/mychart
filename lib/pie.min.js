!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("echarts/lib/chart/pie"),require("echarts/lib/echarts"),require("echarts/lib/component/tooltip"),require("echarts/lib/component/legend")):"function"==typeof define&&define.amd?define(["exports","echarts/lib/chart/pie","echarts/lib/echarts","echarts/lib/component/tooltip","echarts/lib/component/legend"],t):t((e=e||self).ePie={},null,e.echarts)}(this,function(e,t,i){"use strict";i=i&&i.hasOwnProperty("default")?i.default:i;var n={categoryAxis:{axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}},valueAxis:{axisLine:{show:!1}},line:{smooth:!0},grid:{containLabel:!0,left:10,right:10}},s=["#19d4ae","#5ab1ef","#fa6e86","#ffb980","#0067a6","#c4b4e4","#d87a80","#9cbbff","#d9d0c7","#87a997","#d49ea2","#5b4947","#7ba3a8"],h=["grid","dataZoom","visualMap","toolbox","title","legend","xAxis","yAxis","radar","tooltip","axisPointer","brush","geo","timeline","graphic","series","backgroundColor","textStyle"],v={th:3,mi:6,bi:9,tr:12},o={zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0,abbrLabel:{th:"k",mi:"m",bi:"b",tr:"t"}},y=1e12,x=1e9,O=1e6,w=1e3;function k(e,t,i,n){var o=e.toString().split("."),r=t-(n||0),a=2===o.length?Math.min(Math.max(o[1].length,r),t):r,s=Math.pow(10,a),l=(i(e+"e+"+a)/s).toFixed(a);if(t-a<n){var h=new RegExp("\\.?0{1,"+(n-(t-a))+"}$");l=l.replace(h,"")}return l}function a(e,t,i,n){var o=Math.abs(t),r=!1,a=!1,s="",l="",h=!1,c=void 0,d=void 0;t=t||0,~(i=i||"").indexOf("(")?(r=!0,i=i.replace(/[(|)]/g,"")):(~i.indexOf("+")||~i.indexOf("-"))&&(d=~i.indexOf("+")?i.indexOf("+"):t<0?i.indexOf("-"):-1,i=i.replace(/[+|-]/g,"")),~i.indexOf("a")&&(c=!!(c=i.match(/a(k|m|b|t)?/))&&c[1],~i.indexOf(" a")&&(s=" "),i=i.replace(new RegExp(s+"a[kmbt]?"),""),y<=o&&!c||"t"===c?(s+=e.abbrLabel.tr,t/=y):o<y&&x<=o&&!c||"b"===c?(s+=e.abbrLabel.bi,t/=x):o<x&&O<=o&&!c||"m"===c?(s+=e.abbrLabel.mi,t/=O):(o<O&&w<=o&&!c||"k"===c)&&(s+=e.abbrLabel.th,t/=w)),~i.indexOf("[.]")&&(a=!0,i=i.replace("[.]","."));var u=t.toString().split(".")[0],f=i.split(".")[1],p=i.indexOf(","),m=(i.split(".")[0].split(",")[0].match(/0/g)||[]).length;if(f?(u=(l=~f.indexOf("[")?k(t,(f=(f=f.replace("]","")).split("["))[0].length+f[1].length,n,f[1].length):k(t,f.length,n)).split(".")[0],l=~l.indexOf(".")?"."+l.split(".")[1]:"",a&&0==+l.slice(1)&&(l="")):u=k(t,0,n),s&&!c&&1e3<=+u&&s!==v.trillion&&(u=""+ +u/1e3,s=v.million),~u.indexOf("-")&&(u=u.slice(1),h=!0),u.length<m)for(var g=m-u.length;0<g;g--)u="0"+u;-1<p&&(u=u.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")),i.indexOf(".")||(u="");var b=u+l+(s||"");return r?b=(r&&h?"(":"")+b+(r&&h?")":""):0<=d?b=0===d?(h?"-":"+")+b:b+(h?"-":"+"):h&&(b="-"+b),b}function r(t,i){Object.keys(i).forEach(function(e){t[e]=i[e]})}var l={},c={};function d(e,t,i){var n;return function(e,t,i){t=t||l.defaultFormat,i=i||Math.round;var n=void 0,o=void 0;if(0===e&&null!==l.zeroFormat)n=l.zeroFormat;else if(null===e&&null!==l.nullFormat)n=l.nullFormat;else{for(var r in c)if(c[r]&&t.match(c[r].regexp)){o=c[r].format;break}n=(o=o||a.bind(null,l))(e,t,i,d)}return n}(0===e||void 0===e?0:null===e||"number"==typeof(n=e)&&isNaN(n)?null:"string"==typeof e?l.zeroFormat&&e===l.zeroFormat?0:l.nullFormat&&e===l.nullFormat||!e.replace(/[^0-9]+/g,"").length?null:+e:+e||null,t,i)}function u(i,n){var o=null;return function(){var e=this,t=arguments;clearTimeout(o),o=setTimeout(function(){i.apply(e,t)},n)}}function f(e){return Object.prototype.toString.call(e)}function p(e){return"[object Object]"===f(e)}function m(e){return"[object Array]"===f(e)}r(l,o),d.options=l,d._numberToFormat=a.bind(null,l),d.register=function(e,t){c[e]=t},d.unregister=function(e){c[e]=null},d.setOptions=function(e){r(l,e)},d.reset=function(){r(l,o)},d.register("percentage",{regexp:/%/,format:function(e,t,i,n){var o=~t.indexOf(" %")?" ":"",r=void 0;return n.options.scalePercentBy100&&(e*=100),t=t.replace(/\s?%/,""),r=~(r=n._numberToFormat(e,t,i)).indexOf(")")?((r=r.split("")).splice(-1,0,o+"%"),r.join("")):r+o+"%"}});var I=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"-";if(isNaN(e))return n;if(!t)return e;if("[object Function]"===f(t))return t(e,d);i=isNaN(i)?0:++i;var o=".[".concat(new Array(i).join(0),"]"),r=t;switch(t){case"KMB":r=i?"0,0".concat(o,"a"):"0,0a";break;case"normal":r=i?"0,0".concat(o):"0,0";break;case"percent":r=i?"0,0".concat(o,"%"):"0,0.[00]%"}return d(e,r)};function K(e,t,i){void 0!==e[t]?e[t].push(i):e[t]=[i]}var G=[80,100],Q=[20,100];function g(t,i){Object.keys(i).forEach(function(e){i[e]&&(t[e]=i[e])})}function b(e){this.data=e.data,this.settings=e.settings||{},this.width=e.width,this.height=e.height,this.el=e.el||"bar",this.beforeConfig=e.beforeConfig,this.afterConfig=e.afterConfig,this.afterSetOption=e.afterSetOption,this.afterSetOptionOnce=e.afterSetOptionOnce,this.events=e.events,this.grid=e.grid,this.colors=e.colors,this.tooltipVisible=e.tooltipVisible||!0,this.legendVisible=e.legendVisible||!0,this.legendPosition=e.legendPosition,this.markLine=e.markLine,this.markArea=e.markArea,this.markPoint=e.markPoint,this.visualMap=e.visualMap,this.dataZoom=e.dataZoom,this.toolbox=e.toolbox,this.initOptions=e.initOptions,this.title=e.title,this.legend=e.legend,this.xAxis=e.xAxis,this.yAxis=e.yAxis,this.radar=e.radar,this.tooltip=e.tooltip,this.axisPointer=e.axisPointer,this.brush=e.brush,this.geo=e.geo,this.timeline=e.timeline,this.graphic=e.graphic,this.series=e.series,this.backgroundColor=e.backgroundColor,this.textStyle=e.textStyle,this.animation=e.animation,this.theme=e.theme,this.themeName=e.themeName,this.loading=e.loading,this.dataEmpty=e.dataEmpty,this.extend=e.extend,this.judgeWidth=e.judgeWidth||!1,this.widthChangeDelay=e.widthChangeDelay||300,this.tooltipFormatter=e.tooltipFormatter||function(){},this.resizeable=e.resizeable||!0,this.resizeDelay=e.resizeDelay||200,this.changeDelay=e.changeDelay||0,this.setOptionOpts=e.setOptionOpts||!0,this.cancelResizeCheck=e.cancelResizeCheck,this.notSetUnchange=e.notSetUnchange,this.log=e.log||!0,this.created(),this.init()}b.prototype.chartHandler=null,b.prototype.dataHandler=function(){if(this.chartHandler){var e=this.data,t=e.columns,i=void 0===t?[]:t,n=e.rows,o=void 0===n?[]:n,r={tooltipVisible:this.tooltipVisible,legendVisible:this.legendVisible,echarts:this.echarts,color:s,tooltipFormatter:this.tooltipFormatter,_once:this._once},a=this.chartHandler(i,o,this.settings,r);a&&("function"==typeof a.then?a.then(this.optionsHandler.bind(this)):this.optionsHandler(a))}},b.prototype.init=function(){var e=this;if(!this.echarts){var t=this.themeName||this.theme||n;this.echarts=i.init(document.getElementById(this.el),t,this.initOptions),this.data&&this.changeHandler(),this.createEventProxy(),this.resizeable&&window.addEventListener("resize",u(function(){e.resize()},1e3))}},b.prototype.addResizeListener=function(){window.addEventListener("resize",this.resizeHandler),this._once.onresize=!0},b.prototype.removeResizeListener=function(){window.removeEventListener("resize",this.resizeHandler),this._once.onresize=!1},b.prototype.created=function(){this.echarts=null,this.registeredEvents=[],this._once={},this._store={},this.resizeHandler=u.call(this,this.resize,this.resizeDelay),this.changeHandler=u(this.dataHandler,this.changeDelay)},b.prototype.createEventProxy=function(){var t=this,o=this,e=Object.keys(this.events||{});e.length&&e.forEach(function(e){var n;-1===t.registeredEvents.indexOf(e)&&(t.registeredEvents.push(e),t.echarts.on(e,(n=e,function(){if(n in o.events){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];o.events[n].apply(null,t)}})))})},b.prototype.optionsHandler=function(t){var i,n,o,e,r=this;if(this.legendPosition&&t.legend&&(t.legend[this.legendPosition]=10,~["left","right"].indexOf(this.legendPosition)&&(t.legend.top="middle",t.legend.orient="vertical")),t.color=this.chartColor(),h.forEach(function(e){r[e]&&(t[e]=r[e])}),this.animation&&(i=t,n=this.animation,Object.keys(n).forEach(function(e){i[e]=n[e]})),this.markArea||this.markLine||this.markPoint){var a={markArea:this.markArea,markLine:this.markLine,markPoint:this.markPoint},s=t.series;m(s)?s.forEach(function(e){g(e,a)}):p(s)&&g(s,a)}this.extend&&(o=t,e=this.extend,Object.keys(e).forEach(function(i){var n=e[i];~i.indexOf(".")?function(e,t,i){if(t){var n=e,o=t.split(".");o.forEach(function(e,t){t===o.length-1?n[e]=i:(n[e]||(n[e]={}),n=n[e])})}}(o,i,n):"function"==typeof n?o[i]=n(o[i]):m(o[i])&&p(o[i][0])?o[i].forEach(function(e,t){o[i][t]=Object.assign({},e,n)}):p(o[i])?o[i]=Object.assign({},o[i],n):o[i]=n}));var l=this.setOptionOpts;!this.settings.bmap&&!this.settings.amap||p(l)||(l=!1),this._isDestroyed||(this.log&&console.log(t),this.echarts.setOption(t,l))},b.prototype.resize=function(){this.cancelResizeCheck?this.echartsResize():this.el&&this.echartsResize()},b.prototype.chartColor=function(){return this.colors||s},b.prototype.echartsResize=function(){this.echarts&&this.echarts.resize()},b.prototype.chartHandler=function(e,t,i,n,o){var r,a,s,l,h,c,d,u,f,p,m=(r=t,JSON.parse(JSON.stringify(r))),g=i.dataType,b=void 0===g?"normal":g,v=i.percentShow,y=i.dimension,x=void 0===y?e[0]:y,O=i.metrics,w=void 0===O?e[1]:O,k=i.roseType,z=void 0!==k&&k,E=i.radius,S=void 0===E?o?z?Q:G:100:E,L=i.offsetY,j=void 0===L?200:L,N=i.legendLimit,P=void 0===N?30:N,A=i.selectedMode,F=void 0!==A&&A,R=i.hoverAnimation,C=void 0===R||R,H=i.digit,M=void 0===H?2:H,T=i.legendName,_=void 0===T?{}:T,V=i.label,D=void 0!==V&&V,q=i.level,B=void 0!==q&&q,Y=i.limitShowNum,Z=void 0===Y?0:Y,J=i.labelLine,U=i.itemStyle,W=n.tooltipVisible,$=n.legendVisible;return Z&&m.sort(function(e,t){return t[w]-e[w]}),{series:function(e){var t=e.innerRows,a=e.dataType,s=e.percentShow,l=e.dimension,h=e.metrics,c=e.radius,i=e.offsetY,n=e.selectedMode,o=e.hoverAnimation,d=e.digit,r=e.roseType,u=e.label,f=e.level,p=e.limitShowNum,m=e.isRing,g=e.labelLine,b=e.itemStyle,v=[],y={},x=[];f?(f.forEach(function(e,t){e.forEach(function(e){K(y,e,t)})}),t.forEach(function(t){var e=y[t[l]];e&&e.length&&e.forEach(function(e){K(x,e,t)})})):x.push(t);var O={type:"pie",selectedMode:n,hoverAnimation:o,roseType:r,center:["50%",i]},w=x.length;if(x.forEach(function(e,t){var i=Object.assign({data:[]},O),n=c/w;if(t){var o=n+c/(2*w)*(2*t-1),r=o+c/(2*w);i.radius=[o,r]}else i.radius=m?c:n;1<w&&0===t&&(i.label={normal:{position:"inner"}}),u&&(i.label=u),g&&(i.labelLine=g),b&&(i.itemStyle=b),s&&(i.label={normal:{show:!0,position:1<w&&0===t?"inner":"outside",formatter:function(e){var t=[];return t.push("".concat(e.name,":")),t.push(I(e.value,a,d)),t.push("(".concat(e.percent,"%)")),t.join(" ")}}}),i.data=e.map(function(e){return{name:e[l],value:e[h]}}),v.push(i)}),p&&p<v[0].data.length){var k=v[0].data,z=k.slice(p,k.length),E=0;z.forEach(function(e){E+=e.value}),v[0].data=k.slice(0,p),v[0].data.push({name:"其他",value:E})}return v}({innerRows:m,dataType:b,percentShow:v,dimension:x,metrics:w,radius:S,offsetY:j,selectedMode:F,hoverAnimation:C,digit:M,roseType:z,label:D,level:B,legendName:_,limitShowNum:Z,isRing:o,labelLine:J,itemStyle:U}),legend:$&&function(e){var t=e.innerRows,i=e.dimension,n=e.legendLimit,o=e.legendName,r=e.level,a=e.limitShowNum,s=[],l=[];if(r)r.forEach(function(e){e.forEach(function(e){l.push(e)})}),s=l;else if(a&&a<t.length){for(var h=0;h<a;h++)s.push(t[h][i]);s.push("其他")}else s=t.map(function(e){return e[i]});return!!s.length&&{data:s,show:s.length<n,formatter:function(e){return null!=o[e]?o[e]:e}}}({innerRows:m,dimension:x,legendLimit:P,legendName:_,level:B,limitShowNum:Z}),tooltip:W&&(s=(a={dataType:b,innerRows:m,limitShowNum:Z,digit:M,metrics:w,dimension:x}).dataType,l=a.innerRows,h=a.limitShowNum,c=a.digit,d=a.metrics,u=a.dimension,f=0,p=l.map(function(e){return f+=e[d],{name:e[u],value:e[d]}}).slice(h,l.length),{formatter:function(e){var t,o=[];return o.push((t=e.color,['<span style="',"background-color:".concat(t,";"),"display: inline-block;","width: 10px;","height: 10px;","border-radius: 50%;","margin-right:2px;",'"></span>'].join(""))),h&&"其他"===e.name?(o.push("其他:"),p.forEach(function(e){var t=e.name,i=e.value,n=I(i/f,"percent");o.push("<br>".concat(t,":")),o.push(I(i,s,c)),o.push("(".concat(n,")"))})):(o.push("".concat(e.name,":")),o.push(I(e.value,s,c)),o.push("(".concat(e.percent,"%)"))),o.join(" ")}})}},e.ePie=b,Object.defineProperty(e,"__esModule",{value:!0})});

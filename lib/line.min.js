!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("echarts/lib/chart/line"),require("echarts/lib/echarts"),require("echarts/lib/component/tooltip"),require("echarts/lib/component/legend")):"function"==typeof define&&define.amd?define(["exports","echarts/lib/chart/line","echarts/lib/echarts","echarts/lib/component/tooltip","echarts/lib/component/legend"],t):t((e=e||self).eLine={},null,e.echarts)}(this,function(e,t,i){"use strict";function n(i,n){var a=null;return function(){var e=this,t=arguments;clearTimeout(a),a=setTimeout(function(){i.apply(e,t)},n)}}function o(e){return Object.prototype.toString.call(e)}function h(e){return"[object Object]"===o(e)}function ce(e){return"[object Array]"===o(e)}i=i&&i.hasOwnProperty("default")?i.default:i;var a={categoryAxis:{axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}},valueAxis:{axisLine:{show:!1}},line:{smooth:!0},grid:{containLabel:!0,left:10,right:10}},s=["#19d4ae","#5ab1ef","#fa6e86","#ffb980","#0067a6","#c4b4e4","#d87a80","#9cbbff","#d9d0c7","#87a997","#d49ea2","#5b4947","#7ba3a8"],c=["grid","dataZoom","visualMap","toolbox","title","legend","xAxis","yAxis","radar","tooltip","axisPointer","brush","geo","timeline","graphic","series","backgroundColor","textStyle"];function d(t,i){Object.keys(i).forEach(function(e){i[e]&&(t[e]=i[e])})}function r(e){this.data=e.data,this.settings=e.settings||{},this.width=e.width,this.height=e.height,this.el=e.el||"bar",this.beforeConfig=e.beforeConfig,this.afterConfig=e.afterConfig,this.afterSetOption=e.afterSetOption,this.afterSetOptionOnce=e.afterSetOptionOnce,this.events=e.events,this.grid=e.grid,this.colors=e.colors,this.tooltipVisible=e.tooltipVisible||!0,this.legendVisible=e.legendVisible||!0,this.legendPosition=e.legendPosition,this.markLine=e.markLine,this.markArea=e.markArea,this.markPoint=e.markPoint,this.visualMap=e.visualMap,this.dataZoom=e.dataZoom,this.toolbox=e.toolbox,this.initOptions=e.initOptions,this.title=e.title,this.legend=e.legend,this.xAxis=e.xAxis,this.yAxis=e.yAxis,this.radar=e.radar,this.tooltip=e.tooltip,this.axisPointer=e.axisPointer,this.brush=e.brush,this.geo=e.geo,this.timeline=e.timeline,this.graphic=e.graphic,this.series=e.series,this.backgroundColor=e.backgroundColor,this.textStyle=e.textStyle,this.animation=e.animation,this.theme=e.theme,this.themeName=e.themeName,this.loading=e.loading,this.dataEmpty=e.dataEmpty,this.extend=e.extend,this.judgeWidth=e.judgeWidth||!1,this.widthChangeDelay=e.widthChangeDelay||300,this.tooltipFormatter=e.tooltipFormatter||function(){},this.resizeable=e.resizeable||!0,this.resizeDelay=e.resizeDelay||200,this.changeDelay=e.changeDelay||0,this.setOptionOpts=e.setOptionOpts||!0,this.cancelResizeCheck=e.cancelResizeCheck,this.notSetUnchange=e.notSetUnchange,this.log=e.log||!0,this.created(),this.init()}r.prototype.chartHandler=null,r.prototype.dataHandler=function(){if(this.chartHandler){var e=this.data,t=e.columns,i=void 0===t?[]:t,n=e.rows,a=void 0===n?[]:n,r={tooltipVisible:this.tooltipVisible,legendVisible:this.legendVisible,echarts:this.echarts,color:s,tooltipFormatter:this.tooltipFormatter,_once:this._once},o=this.chartHandler(i,a,this.settings,r);o&&("function"==typeof o.then?o.then(this.optionsHandler.bind(this)):this.optionsHandler(o))}},r.prototype.init=function(){var e=this;if(!this.echarts){var t=this.themeName||this.theme||a;this.echarts=i.init(document.getElementById(this.el),t,this.initOptions),this.data&&this.changeHandler(),this.createEventProxy(),this.resizeable&&window.addEventListener("resize",n(function(){e.resize()},1e3))}},r.prototype.addResizeListener=function(){window.addEventListener("resize",this.resizeHandler),this._once.onresize=!0},r.prototype.removeResizeListener=function(){window.removeEventListener("resize",this.resizeHandler),this._once.onresize=!1},r.prototype.created=function(){this.echarts=null,this.registeredEvents=[],this._once={},this._store={},this.resizeHandler=n.call(this,this.resize,this.resizeDelay),this.changeHandler=n(this.dataHandler,this.changeDelay)},r.prototype.createEventProxy=function(){var t=this,a=this,e=Object.keys(this.events||{});e.length&&e.forEach(function(e){var n;-1===t.registeredEvents.indexOf(e)&&(t.registeredEvents.push(e),t.echarts.on(e,(n=e,function(){if(n in a.events){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];a.events[n].apply(null,t)}})))})},r.prototype.optionsHandler=function(t){var i,n,a,e,r=this;if(this.legendPosition&&t.legend&&(t.legend[this.legendPosition]=10,~["left","right"].indexOf(this.legendPosition)&&(t.legend.top="middle",t.legend.orient="vertical")),t.color=this.chartColor(),c.forEach(function(e){r[e]&&(t[e]=r[e])}),this.animation&&(i=t,n=this.animation,Object.keys(n).forEach(function(e){i[e]=n[e]})),this.markArea||this.markLine||this.markPoint){var o={markArea:this.markArea,markLine:this.markLine,markPoint:this.markPoint},s=t.series;ce(s)?s.forEach(function(e){d(e,o)}):h(s)&&d(s,o)}this.extend&&(a=t,e=this.extend,Object.keys(e).forEach(function(i){var n=e[i];~i.indexOf(".")?function(e,t,i){if(t){var n=e,a=t.split(".");a.forEach(function(e,t){t===a.length-1?n[e]=i:(n[e]||(n[e]={}),n=n[e])})}}(a,i,n):"function"==typeof n?a[i]=n(a[i]):ce(a[i])&&h(a[i][0])?a[i].forEach(function(e,t){a[i][t]=Object.assign({},e,n)}):h(a[i])?a[i]=Object.assign({},a[i],n):a[i]=n}));var l=this.setOptionOpts;!this.settings.bmap&&!this.settings.amap||h(l)||(l=!1),this._isDestroyed||(this.log&&console.log(t),this.echarts.setOption(t,l))},r.prototype.resize=function(){this.cancelResizeCheck?this.echartsResize():this.el&&this.echartsResize()},r.prototype.chartColor=function(){return this.colors||s},r.prototype.echartsResize=function(){this.echarts&&this.echarts.resize()};var x={th:3,mi:6,bi:9,tr:12},l={zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0,abbrLabel:{th:"k",mi:"m",bi:"b",tr:"t"}},y=1e12,v=1e9,O=1e6,k=1e3;function A(e,t,i,n){var a=e.toString().split("."),r=t-(n||0),o=2===a.length?Math.min(Math.max(a[1].length,r),t):r,s=Math.pow(10,o),l=(i(e+"e+"+o)/s).toFixed(o);if(t-o<n){var h=new RegExp("\\.?0{1,"+(n-(t-o))+"}$");l=l.replace(h,"")}return l}function u(e,t,i,n){var a=Math.abs(t),r=!1,o=!1,s="",l="",h=!1,c=void 0,d=void 0;t=t||0,~(i=i||"").indexOf("(")?(r=!0,i=i.replace(/[(|)]/g,"")):(~i.indexOf("+")||~i.indexOf("-"))&&(d=~i.indexOf("+")?i.indexOf("+"):t<0?i.indexOf("-"):-1,i=i.replace(/[+|-]/g,"")),~i.indexOf("a")&&(c=!!(c=i.match(/a(k|m|b|t)?/))&&c[1],~i.indexOf(" a")&&(s=" "),i=i.replace(new RegExp(s+"a[kmbt]?"),""),y<=a&&!c||"t"===c?(s+=e.abbrLabel.tr,t/=y):a<y&&v<=a&&!c||"b"===c?(s+=e.abbrLabel.bi,t/=v):a<v&&O<=a&&!c||"m"===c?(s+=e.abbrLabel.mi,t/=O):(a<O&&k<=a&&!c||"k"===c)&&(s+=e.abbrLabel.th,t/=k)),~i.indexOf("[.]")&&(o=!0,i=i.replace("[.]","."));var u=t.toString().split(".")[0],f=i.split(".")[1],p=i.indexOf(","),m=(i.split(".")[0].split(",")[0].match(/0/g)||[]).length;if(f?(u=(l=~f.indexOf("[")?A(t,(f=(f=f.replace("]","")).split("["))[0].length+f[1].length,n,f[1].length):A(t,f.length,n)).split(".")[0],l=~l.indexOf(".")?"."+l.split(".")[1]:"",o&&0==+l.slice(1)&&(l="")):u=A(t,0,n),s&&!c&&1e3<=+u&&s!==x.trillion&&(u=""+ +u/1e3,s=x.million),~u.indexOf("-")&&(u=u.slice(1),h=!0),u.length<m)for(var g=m-u.length;0<g;g--)u="0"+u;-1<p&&(u=u.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")),i.indexOf(".")||(u="");var b=u+l+(s||"");return r?b=(r&&h?"(":"")+b+(r&&h?")":""):0<=d?b=0===d?(h?"-":"+")+b:b+(h?"-":"+"):h&&(b="-"+b),b}function f(t,i){Object.keys(i).forEach(function(e){t[e]=i[e]})}var p={},m={};function g(e,t,i){var n;return function(e,t,i){t=t||p.defaultFormat,i=i||Math.round;var n=void 0,a=void 0;if(0===e&&null!==p.zeroFormat)n=p.zeroFormat;else if(null===e&&null!==p.nullFormat)n=p.nullFormat;else{for(var r in m)if(m[r]&&t.match(m[r].regexp)){a=m[r].format;break}n=(a=a||u.bind(null,p))(e,t,i,g)}return n}(0===e||void 0===e?0:null===e||"number"==typeof(n=e)&&isNaN(n)?null:"string"==typeof e?p.zeroFormat&&e===p.zeroFormat?0:p.nullFormat&&e===p.nullFormat||!e.replace(/[^0-9]+/g,"").length?null:+e:+e||null,t,i)}f(p,l),g.options=p,g._numberToFormat=u.bind(null,p),g.register=function(e,t){m[e]=t},g.unregister=function(e){m[e]=null},g.setOptions=function(e){f(p,e)},g.reset=function(){f(p,l)},g.register("percentage",{regexp:/%/,format:function(e,t,i,n){var a=~t.indexOf(" %")?" ":"",r=void 0;return n.options.scalePercentBy100&&(e*=100),t=t.replace(/\s?%/,""),r=~(r=n._numberToFormat(e,t,i)).indexOf(")")?((r=r.split("")).splice(-1,0,a+"%"),r.join("")):r+a+"%"}});var de=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"-";if(isNaN(e))return n;if(!t)return e;if("[object Function]"===o(t))return t(e,g);i=isNaN(i)?0:++i;var a=".[".concat(new Array(i).join(0),"]"),r=t;switch(t){case"KMB":r=i?"0,0".concat(a,"a"):"0,0a";break;case"normal":r=i?"0,0".concat(a):"0,0";break;case"percent":r=i?"0,0".concat(a,"%"):"0,0.[00]%"}return g(e,r)};function ue(e){var i,n,t=e.rows,a=e.axisSite,r=e.metrics,o=e.area,s=e.stack,l=e.nullAddZero,h=e.labelMap,c=e.label,d=e.itemStyle,u=e.lineStyle,f=e.areaStyle,p=e.dimension,m=[],g={},b=s&&(i=s,n={},Object.keys(i).forEach(function(t){i[t].forEach(function(e){n[e]=t})}),n);return r.forEach(function(e){g[e]=[]}),t.forEach(function(i){r.forEach(function(e){var t=null;null!=i[e]?t=i[e]:l&&(t=0),g[e].push([i[p[0]],t])})}),r.forEach(function(e){var t={name:null!=h[e]?h[e]:e,type:"line",data:g[e]};o&&(t.areaStyle={normal:{}}),a.right&&(t.yAxisIndex=~a.right.indexOf(e)?1:0),s&&b[e]&&(t.stack=b[e]),c&&(t.label=c),d&&(t.itemStyle=d),u&&(t.lineStyle=u),f&&(t.areaStyle=f),m.push(t)}),m}r.prototype.chartHandler=function(e,t,i,n){t=ce(t)?t:[],e=ce(e)?e:[];var a=i.axisSite,r=void 0===a?{}:a,o=i.yAxisType,s=void 0===o?["normal","normal"]:o,l=i.xAxisType,h=void 0===l?"category":l,c=i.yAxisName,d=void 0===c?[]:c,u=i.dimension,f=void 0===u?[e[0]]:u,p=i.xAxisName,m=void 0===p?[]:p,g=i.axisVisible,b=void 0===g||g,x=i.area,y=i.stack,v=i.scale,O=void 0===v?[!1,!1]:v,k=i.min,A=void 0===k?[null,null]:k,S=i.max,z=void 0===S?[null,null]:S,w=i.nullAddZero,E=void 0!==w&&w,L=i.digit,F=void 0===L?2:L,j=i.legendName,N=void 0===j?{}:j,P=i.labelMap,M=void 0===P?{}:P,T=i.label,V=i.itemStyle,C=i.lineStyle,H=i.areaStyle,_=n.tooltipVisible,R=n.legendVisible,D=n.tooltipFormatter,Z=e.slice();r.left&&r.right?Z=r.left.concat(r.right):r.left&&!r.right?Z=r.left:i.metrics?Z=i.metrics:Z.splice(e.indexOf(f[0]),1);var q,B,I,U,W,$,G,K,J,Q,X,Y,ee,te,ie,ne,ae,re,oe=R&&(B=(q={metrics:Z,legendName:N,labelMap:M}).metrics,I=q.legendName,U=q.labelMap,I||U?{data:U?B.map(function(e){return null==U[e]?e:U[e]}):B,formatter:function(e){return null!=I[e]?I[e]:e}}:{data:B}),se=_&&($=(W={axisSite:r,yAxisType:s,digit:F,labelMap:M,xAxisType:h,tooltipFormatter:D}).axisSite,G=W.yAxisType,K=W.digit,J=W.labelMap,Q=W.tooltipFormatter,X=$.right||[],Y=J?X.map(function(e){return void 0===J[e]?e:J[e]}):X,{trigger:"axis",formatter:function(e){if(Q)return Q.apply(null,arguments);var s=[],t=e[0],i=t.name,n=t.axisValueLabel,a=i||n;return s.push("".concat(a,"<br>")),e.forEach(function(e){var t,i=e.seriesName,n=e.data,a=e.marker,r=~Y.indexOf(i)?G[1]:G[0],o=ce(n)?n[1]:n;t=de(o,r,K),s.push(a),s.push("".concat(i,": ").concat(t)),s.push("<br>")}),s.join("")}}),le=(te=(ee={dimension:f,rows:t,xAxisName:m,axisVisible:b,xAxisType:h}).dimension,ie=ee.rows,ne=ee.xAxisName,ae=ee.axisVisible,re=ee.xAxisType,te.map(function(t,e){return{type:re,nameLocation:"middle",nameGap:22,name:ne[e]||"",axisTick:{show:!0,lineStyle:{color:"#eee"}},data:ie.map(function(e){return e[t]}),show:ae}})),he=function(e){for(var i=e.yAxisName,n=e.yAxisType,t=e.axisVisible,a=e.scale,r=e.min,o=e.max,s=e.digit,l={type:"value",axisTick:{show:!1},show:t},h=[],c=function(t){n[t]?h[t]=Object.assign({},l,{axisLabel:{formatter:function(e){return de(e,n[t],s)}}}):h[t]=Object.assign({},l),h[t].name=i[t]||"",h[t].scale=a[t]||!1,h[t].min=r[t]||null,h[t].max=o[t]||null},d=0;d<2;d++)c(d);return h}({yAxisName:d,yAxisType:s,axisVisible:b,scale:O,min:A,max:z,digit:F});return{legend:oe,xAxis:le,series:ue({rows:t,axisSite:r,metrics:Z,area:x,stack:y,nullAddZero:E,labelMap:M,label:T,itemStyle:V,lineStyle:C,areaStyle:H,xAxisType:h,dimension:f}),yAxis:he,tooltip:se}},e.eLine=r,Object.defineProperty(e,"__esModule",{value:!0})});
